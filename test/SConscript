from os import environ, path

Import('env')
Import('rose_lib')

env = env.Clone()

GTEST_DIR = '#/external/googletest'

env.Prepend(LIBS=[rose_lib],
            CPPPATH=[Dir(GTEST_DIR),
                     Dir(GTEST_DIR + '/include')])

test = env.Program(target='test',
                   source=[env.Glob('*.cpp'),
                           File(GTEST_DIR + '/src/gtest-all.cc')])

env.Command(target='unit-test',
            source=test[0],
            action=test[0].abspath)

# vim:ft=python
